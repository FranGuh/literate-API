<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentación de Portfolio API</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1a202c; /* dark:gray-800 */
        }
        ::-webkit-scrollbar-thumb {
            background: #4a5568; /* dark:gray-600 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #718096; /* dark:gray-500 */
        }
        /* Simple syntax highlighting */
        .json-key { color: #9cdcfe; }
        .json-string { color: #ce9178; }
        .json-number { color: #b5cea8; }
        .json-boolean { color: #569cd6; }
        .json-null { color: #569cd6; }
    </style>
</head>
<body class="bg-gray-900 text-gray-300">

    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-gray-800 p-6 overflow-y-auto flex-shrink-0">
            <h1 class="text-2xl font-bold text-white mb-8">Portfolio API</h1>
            <nav id="sidebar-nav">
                <h2 class="text-xs font-bold uppercase text-gray-400 mb-2">General</h2>
                <ul>
                    <li><a href="#introduction" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Introducción</a></li>
                </ul>
                <h2 class="text-xs font-bold uppercase text-gray-400 mt-6 mb-2">Autenticación</h2>
                <ul>
                    <li><a href="#auth-register" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Registro</a></li>
                    <li><a href="#auth-login" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Login</a></li>
                    <li><a href="#auth-verify" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Verificar Email</a></li>
                </ul>
                <h2 class="text-xs font-bold uppercase text-gray-400 mt-6 mb-2">Proyectos</h2>
                <ul>
                    <li><a href="#proyectos-get-all" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Obtener Proyectos</a></li>
                    <li><a href="#proyectos-get-one" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Obtener un Proyecto</a></li>
                    <li><a href="#proyectos-create" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Crear Proyecto</a></li>
                    <li><a href="#proyectos-update" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Actualizar Proyecto</a></li>
                    <li><a href="#proyectos-delete" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Eliminar Proyecto</a></li>
                </ul>
                <h2 class="text-xs font-bold uppercase text-gray-400 mt-6 mb-2">Tecnologías</h2>
                 <ul>
                    <li><a href="#tecnologias-get-all" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Obtener Tecnologías</a></li>
                    <li><a href="#tecnologias-create" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Crear Tecnología</a></li>
                    <li><a href="#tecnologias-associate" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Asociar Tecnología</a></li>
                    <li><a href="#tecnologias-associate-lote" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Asociar Lote</a></li>
                    <li><a href="#tecnologias-delete-association" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Eliminar Asociación</a></li>
                </ul>
                 <h2 class="text-xs font-bold uppercase text-gray-400 mt-6 mb-2">Imágenes</h2>
                 <ul>
                    <li><a href="#imagenes-upload" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Subir Imagen</a></li>
                    <li><a href="#imagenes-update" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Actualizar Imagen</a></li>
                    <li><a href="#imagenes-delete" class="nav-link block py-2 px-3 rounded hover:bg-gray-700">Eliminar Imagen</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-8 md:p-12 overflow-y-auto">
            <div class="max-w-4xl mx-auto">
                <!-- Introduction -->
                <section id="introduction" class="content-section mb-16">
                    <h1 class="text-4xl font-bold text-white mb-4">Introducción</h1>
                    <p class="text-lg text-gray-400 mb-6">Bienvenido a la documentación de la API del Portafolio. Esta API permite gestionar proyectos, tecnologías e imágenes de forma segura y eficiente.</p>
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <p><strong class="text-white">URL Base:</strong> <code class="bg-gray-700 px-2 py-1 rounded">/api</code></p>
                        <p class="mt-2"><strong class="text-white">Autenticación:</strong> Todas las rutas protegidas requieren un Bearer Token en la cabecera `Authorization`.</p>
                    </div>
                </section>

                <!-- Auth Sections -->
                <section id="auth-register" class="content-section mb-12 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Registro de Usuario</h2>
                    <p class="mb-4">Crea una nueva cuenta de administrador.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-green-600 text-white text-xs font-bold px-3 py-1 rounded">POST</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/auth/register</code>
                    </div>
                    <h3 class="font-bold text-white mt-6 mb-2">Request Body:</h3>
                    <pre class="bg-gray-800 p-4 rounded-lg overflow-x-auto"><code class="language-json">{
    "<span class="json-key">nombre</span>": "<span class="json-string">Test User</span>",
    "<span class="json-key">email</span>": "<span class="json-string">user@example.com</span>",
    "<span class="json-key">password</span>": "<span class="json-string">password123</span>"
}</code></pre>
                    <h3 class="font-bold text-white mt-6 mb-2">Success Response (201):</h3>
                     <pre class="bg-gray-800 p-4 rounded-lg overflow-x-auto"><code class="language-json">{
    "<span class="json-key">msg</span>": "<span class="json-string">Usuario registrado. Por favor, revisa tu correo para verificar tu cuenta.</span>",
    "<span class="json-key">usuario</span>": {
        "<span class="json-key">id</span>": <span class="json-number">1</span>,
        "<span class="json-key">email</span>": "<span class="json-string">user@example.com</span>"
    }
}</code></pre>
                </section>
                
                <section id="auth-login" class="content-section mb-12 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Inicio de Sesión</h2>
                    <p class="mb-4">Autentica un usuario y recibe un token JWT.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-green-600 text-white text-xs font-bold px-3 py-1 rounded">POST</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/auth/login</code>
                    </div>
                     <h3 class="font-bold text-white mt-6 mb-2">Request Body:</h3>
                    <pre class="bg-gray-800 p-4 rounded-lg overflow-x-auto"><code class="language-json">{
    "<span class="json-key">email</span>": "<span class="json-string">user@example.com</span>",
    "<span class="json-key">password</span>": "<span class="json-string">password123</span>"
}</code></pre>
                    <h3 class="font-bold text-white mt-6 mb-2">Success Response (200):</h3>
                     <pre class="bg-gray-800 p-4 rounded-lg overflow-x-auto"><code class="language-json">{
    "<span class="json-key">token</span>": "<span class="json-string">eyJhbGciOiJIUzI1NiIsIn...</span>"
}</code></pre>
                </section>

                <section id="auth-verify" class="content-section mb-12 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Verificar Email</h2>
                    <p class="mb-4">Confirma una cuenta de usuario a través del token enviado por email.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded">GET</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/auth/verify/:token</code>
                    </div>
                    <h3 class="font-bold text-white mt-6 mb-2">URL Parameters:</h3>
                    <p><code class="bg-gray-700 px-2 py-1 rounded">:token</code> (string) - El token único enviado al correo del usuario.</p>
                    <h3 class="font-bold text-white mt-6 mb-2">Success Response (200):</h3>
                     <pre class="bg-gray-800 p-4 rounded-lg overflow-x-auto"><code>¡Tu cuenta ha sido verificada exitosamente!</code></pre>
                </section>

                <!-- Proyectos Sections -->
                <section id="proyectos-get-all" class="content-section mb-12 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Obtener Proyectos</h2>
                    <p class="mb-4">Recupera una lista de todos los proyectos. Esta ruta es pública.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded">GET</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/proyectos</code>
                    </div>
                </section>

                <section id="proyectos-get-one" class="content-section mb-12 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Obtener un Proyecto</h2>
                    <p class="mb-4">Recupera un proyecto específico por su ID. Esta ruta es pública.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded">GET</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/proyectos/:id</code>
                    </div>
                </section>
                
                <section id="proyectos-create" class="content-section mb-12 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Crear Proyecto</h2>
                    <p class="mb-4">Crea un nuevo proyecto. Requiere autenticación.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-green-600 text-white text-xs font-bold px-3 py-1 rounded">POST</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/proyectos</code>
                    </div>
                </section>

                <section id="proyectos-update" class="content-section mb-12 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Actualizar Proyecto</h2>
                    <p class="mb-4">Actualiza parcialmente un proyecto existente. Requiere autenticación y ser el propietario.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-yellow-500 text-white text-xs font-bold px-3 py-1 rounded">PATCH</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/proyectos/:id</code>
                    </div>
                </section>

                <section id="proyectos-delete" class="content-section mb-12 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Eliminar Proyecto</h2>
                    <p class="mb-4">Elimina un proyecto y todas sus imágenes y relaciones asociadas. Requiere autenticación y ser el propietario.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-red-600 text-white text-xs font-bold px-3 py-1 rounded">DELETE</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/proyectos/:id</code>
                    </div>
                </section>

                <!-- Tecnologías Sections -->
                <section id="tecnologias-get-all" class="content-section mb-12 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Obtener Tecnologías</h2>
                    <p class="mb-4">Recupera una lista de todas las tecnologías. Ruta pública y cacheada.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded">GET</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/tecnologias</code>
                    </div>
                </section>

                <section id="tecnologias-create" class="content-section mb-12 hidden">
                     <h2 class="text-2xl font-bold text-white mb-4">Crear Tecnología</h2>
                     <p class="mb-4">Crea una nueva tecnología. Requiere autenticación.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-green-600 text-white text-xs font-bold px-3 py-1 rounded">POST</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/tecnologias</code>
                    </div>
                </section>

                <section id="tecnologias-associate" class="content-section mb-12 hidden">
                     <h2 class="text-2xl font-bold text-white mb-4">Asociar Tecnología</h2>
                     <p class="mb-4">Asocia una tecnología existente a un proyecto. Requiere autenticación y ser el propietario del proyecto.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-green-600 text-white text-xs font-bold px-3 py-1 rounded">POST</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/proyectos/:projectId/tecnologia</code>
                    </div>
                </section>
                
                <section id="tecnologias-associate-lote" class="content-section mb-12 hidden">
                     <h2 class="text-2xl font-bold text-white mb-4">Asociar Lote de Tecnologías</h2>
                     <p class="mb-4">Asocia un arreglo de tecnologías a un proyecto en una sola transacción. Requiere autenticación y ser el propietario.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-green-600 text-white text-xs font-bold px-3 py-1 rounded">POST</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/proyectos/:projectId/tecnologias-lote</code>
                    </div>
                </section>

                <section id="tecnologias-delete-association" class="content-section mb-12 hidden">
                     <h2 class="text-2xl font-bold text-white mb-4">Eliminar Asociación de Tecnología</h2>
                     <p class="mb-4">Elimina la relación entre un proyecto y una tecnología. Requiere autenticación y ser el propietario.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-red-600 text-white text-xs font-bold px-3 py-1 rounded">DELETE</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/proyectos/:projectId/tecnologias/:tecnologiaId</code>
                    </div>
                </section>
                
                <!-- Imágenes Sections -->
                 <section id="imagenes-upload" class="content-section mb-12 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Subir Imagen</h2>
                    <p class="mb-4">Sube, optimiza y asocia una imagen a un proyecto. Requiere autenticación, ser propietario y `Content-Type: multipart/form-data`.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-green-600 text-white text-xs font-bold px-3 py-1 rounded">POST</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/upload/image/:projectId</code>
                    </div>
                </section>

                <section id="imagenes-update" class="content-section mb-12 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Actualizar Texto de Imagen</h2>
                    <p class="mb-4">Actualiza el texto alternativo (`texto_alt`) de una imagen. Requiere autenticación y ser propietario del proyecto asociado.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-yellow-500 text-white text-xs font-bold px-3 py-1 rounded">PATCH</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/imagenes/:id</code>
                    </div>
                </section>

                 <section id="imagenes-delete" class="content-section mb-12 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Eliminar Imagen</h2>
                    <p class="mb-4">Elimina una imagen de la base de datos y de AWS S3. Requiere autenticación y ser propietario del proyecto asociado.</p>
                    <div class="flex items-center mb-4">
                        <span class="bg-red-600 text-white text-xs font-bold px-3 py-1 rounded">DELETE</span>
                        <code class="ml-3 text-lg bg-gray-800 px-2 py-1 rounded">/imagenes/:id</code>
                    </div>
                </section>

                <!-- INICIO DEL FOOTER -->
                <footer class="mt-24 border-t border-gray-700 pt-8 text-center text-gray-500">
                    <p>Creado por 
                        <a href="https://github.com/FranGuh" target="_blank" rel="noopener noreferrer" class="text-indigo-400 hover:text-indigo-300 transition-colors">
                            @FranGuh
                        </a>
                    </p>
                </footer>
                <!-- FIN DEL FOOTER -->

            </div>
        </main>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const navLinks = document.querySelectorAll('.nav-link');
        const contentSections = document.querySelectorAll('.content-section');
        const firstLink = document.querySelector('.nav-link');

        // Function to show a section
        function showSection(hash) {
            contentSections.forEach(section => {
                if ('#' + section.id === hash) {
                    section.classList.remove('hidden');
                } else {
                    section.classList.add('hidden');
                }
            });
            // Update active link
            navLinks.forEach(link => {
                 if (link.getAttribute('href') === hash) {
                    link.classList.add('bg-gray-700', 'text-white');
                 } else {
                    link.classList.remove('bg-gray-700', 'text-white');
                 }
            });
        }

        // Handle navigation clicks
        navLinks.forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                const hash = this.getAttribute('href');
                window.location.hash = hash;
            });
        });

        // Handle hash changes (on click and on page load/refresh)
        window.addEventListener('hashchange', () => {
            showSection(window.location.hash || '#introduction');
        });
        
        // Initial load
        showSection(window.location.hash || '#introduction');

        // Add copy-to-clipboard functionality to all code blocks with a button
        document.querySelectorAll('pre').forEach(pre => {
            const code = pre.querySelector('code');
            const button = document.createElement('button');
            button.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>`;
            button.className = 'absolute top-2 right-2 p-1.5 text-gray-400 rounded hover:bg-gray-600 hover:text-white transition-colors';
            button.setAttribute('aria-label', 'Copiar al portapapeles');
            pre.style.position = 'relative';
            pre.appendChild(button);

            button.addEventListener('click', () => {
                const textToCopy = code.innerText;
                // Use a temporary textarea to copy
                const textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    button.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-lg" viewBox="0 0 16 16"><path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022z"/></svg>`;
                } catch (err) {
                    console.error('Error al copiar: ', err);
                }
                document.body.removeChild(textArea);

                setTimeout(() => {
                     button.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>`;
                }, 2000);
            });
        });

    });
</script>

</body>
</html>

